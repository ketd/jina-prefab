{
  "schema_version": "1.0",
  "id": "jina-ai-prefab",
  "version": "0.1.2",
  "name": "Jina AI 预制件",
  "description": "使用 Jina AI 的 API 进行网络搜索和 URL 内容读取",
  "author": "ketd",
  "github_url": "https://github.com/ketd/jina-prefab",
  "tags": [
    "jina",
    "search",
    "web-reader",
    "ai",
    "content-extraction"
  ],
  "entry_point": "src/main.py",
  "dependencies_file": "pyproject.toml",
  "functions": [
    {
      "name": "jina_search",
      "description": "使用 Jina AI 进行网络搜索，返回相关的搜索结果",
      "parameters": [
        {
          "name": "query",
          "type": "string",
          "description": "搜索关键词或问题",
          "required": true
        },
        {
          "name": "max_results",
          "type": "integer",
          "description": "返回的最大结果数量，默认 10",
          "required": false,
          "default": 10
        },
        {
          "name": "include_content",
          "type": "boolean",
          "description": "是否包含页面内容（会消耗更多 tokens），默认 false",
          "required": false,
          "default": false
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含搜索结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "query": {
            "type": "string",
            "description": "搜索关键词（成功时）",
            "optional": true
          },
          "results": {
            "type": "array",
            "description": "搜索结果列表（成功时）",
            "optional": true,
            "items": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "description": "页面标题"
                },
                "url": {
                  "type": "string",
                  "description": "页面 URL"
                },
                "description": {
                  "type": "string",
                  "description": "页面描述"
                },
                "content": {
                  "type": "string",
                  "description": "页面内容（如果 include_content=true）"
                }
              }
            }
          },
          "total_results": {
            "type": "integer",
            "description": "返回的结果数量（成功时）",
            "optional": true
          },
          "total_tokens": {
            "type": "integer",
            "description": "使用的总 tokens 数（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": [
              "MISSING_API_KEY",
              "INVALID_API_KEY",
              "INVALID_QUERY",
              "INVALID_MAX_RESULTS",
              "RATE_LIMIT_EXCEEDED",
              "API_REQUEST_FAILED",
              "API_ERROR",
              "REQUEST_TIMEOUT",
              "CONNECTION_ERROR",
              "REQUEST_FAILED",
              "UNEXPECTED_ERROR"
            ]
          },
          "status_code": {
            "type": "integer",
            "description": "HTTP 状态码（失败时）",
            "optional": true
          }
        }
      },
      "secrets": [
        {
          "name": "JINA_API_KEY",
          "description": "Jina AI 的 API 密钥",
          "instructions": "请访问 https://jina.ai/ 注册账号并获取 API Key。登录后在 API Keys 页面可以创建新的密钥。",
          "required": true
        }
      ]
    },
    {
      "name": "jina_read_url",
      "description": "使用 Jina AI 读取指定 URL 的内容，返回页面的标题、描述、正文等信息",
      "parameters": [
        {
          "name": "url",
          "type": "string",
          "description": "要读取的 URL 地址（必须以 http:// 或 https:// 开头）",
          "required": true
        },
        {
          "name": "include_metadata",
          "type": "boolean",
          "description": "是否包含页面元数据（语言、viewport 等），默认 true",
          "required": false,
          "default": true
        }
      ],
      "returns": {
        "type": "object",
        "description": "包含页面内容的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "url": {
            "type": "string",
            "description": "原始 URL（成功时）",
            "optional": true
          },
          "title": {
            "type": "string",
            "description": "页面标题（成功时）",
            "optional": true
          },
          "description": {
            "type": "string",
            "description": "页面描述（成功时）",
            "optional": true
          },
          "content": {
            "type": "string",
            "description": "页面正文内容，Markdown 格式（成功时）",
            "optional": true
          },
          "published_time": {
            "type": "string",
            "description": "发布时间（成功时）",
            "optional": true
          },
          "metadata": {
            "type": "object",
            "description": "页面元数据（成功时且 include_metadata=true）",
            "optional": true,
            "properties": {
              "lang": {
                "type": "string",
                "description": "页面语言"
              },
              "viewport": {
                "type": "string",
                "description": "视口设置"
              }
            }
          },
          "tokens": {
            "type": "integer",
            "description": "使用的 tokens 数（成功时）",
            "optional": true
          },
          "warning": {
            "type": "string",
            "description": "警告信息（可选）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": [
              "MISSING_API_KEY",
              "INVALID_API_KEY",
              "INVALID_URL",
              "INVALID_URL_FORMAT",
              "URL_NOT_FOUND",
              "RATE_LIMIT_EXCEEDED",
              "API_REQUEST_FAILED",
              "API_ERROR",
              "REQUEST_TIMEOUT",
              "CONNECTION_ERROR",
              "REQUEST_FAILED",
              "UNEXPECTED_ERROR"
            ]
          },
          "status_code": {
            "type": "integer",
            "description": "HTTP 状态码（失败时）",
            "optional": true
          }
        }
      },
      "secrets": [
        {
          "name": "JINA_API_KEY",
          "description": "Jina AI 的 API 密钥",
          "instructions": "请访问 https://jina.ai/ 注册账号并获取 API Key。登录后在 API Keys 页面可以创建新的密钥。",
          "required": true
        }
      ]
    }
  ],
  "execution_environment": {
    "cpu": "500m",
    "memory": "256Mi"
  }
}
